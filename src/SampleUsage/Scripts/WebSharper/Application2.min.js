(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;$.Define($$,{Application2:{Client:{Main:function(){var s,w,x,z,B;a.subscribe("message",function(r){return b(c(r));});s=f.Create();e.getAll(function(t){var u;s.Items.Clear();u=s.Items;return g.iter(function(v){return u.Add(v);},t);});x=function(){return a.store("getAllPosts",null);};z=function(){a.publish.apply(a,["message","Hello AmplifyJS!"]);};B=h.ofArray([k.TextNode("Title")]);w=h.ofArray([k.Button("Clear Cache",$.New(l,{$:0}),x),k.Button(" Publish Message",$.New(l,{$:0}),z),k.Element("table",h.ofArray([m.Create("class","table table-hover")]),h.ofArray([k.Element("th",[],B),k.Convert(function(C){var D,E;E=h.ofArray([k.TextNode(C.title)]);D=h.ofArray([k.Element("td",[],E)]);return k.Element("tr",[],D);},s.Items.get_View())]))]);return k.Element("div",[],w);},PostModel:$.Class({},{Bind:function(F){var G;G=function(){return n.Fresh();};return $.New(f,{Items:o.Create(G,F)});},Create:function(){var I,K;I=function(){return n.Fresh();};K=$.New(l,{$:0});return $.New(f,{Items:o.Create(I,K)});}}),cache:$.Field(function(){var L;L={};L.number=1000;return{$:2,$0:L};}),createPost:function(M){var N,O;N={};N.url="https://jsonplaceholder.typicode.com/posts";N.type="POST";N.dataType="json";N.data=M;a.request.define("createPost","ajax",N);O={resourceId:"createPost"};O.success=function(P){return e.log(P);};return a.request(O);},getAll:function(Q){var R,S,T,U;R=a.store("getAllPosts");if(!p.Equals(R,undefined)){S=Q(R);}else{T={};T.url="https://jsonplaceholder.typicode.com/posts";T.type="GET";T.dataType="json";T.cache=true;a.request.define("getAllPosts","ajax",T);U={resourceId:"getAllPosts"};U.success=function(V){Q(V);return a.store("getAllPosts",V);};S=a.request(U);}return S;},getById:function(W){var X,Y;X={};X.url="https://jsonplaceholder.typicode.com/posts/{id}";X.type="GET";X.dataType="json";X.cache=e.cache().$0;a.request.define("getPostById","ajax",X);Y={id:"1"};return a.request("getPostById",Y,function(Z){return W(Z);});},log:function(_0){return q?q.log(_0):undefined;}}}});$.OnInit(function(){a=$.Safe($$.amplify);b=$.Safe($$.alert);c=$.Safe($$.String);d=$.Safe($$.Application2);e=$.Safe(d.Client);f=$.Safe(e.PostModel);g=$.Safe($$.WebSharper.Arrays);h=$.Safe($$.WebSharper.List);i=$.Safe($$.WebSharper.UI);j=$.Safe(i.Next);k=$.Safe(j.Doc);l=$.Safe(h.T);m=$.Safe(j.AttrProxy);n=$.Safe(j.Key);o=$.Safe(j.ListModel);p=$.Safe($$.WebSharper.Unchecked);return q=$.Safe($$.console);});$.OnLoad(function(){e.cache();return;});}());
